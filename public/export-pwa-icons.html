<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Export PWA icons</title>
  <style>
    body { font-family: system-ui, sans-serif; padding: 2rem; max-width: 480px; margin: 0 auto; }
    h1 { font-size: 1.25rem; }
    p { color: #666; margin: 0.5rem 0 1rem; }
    button { padding: 0.5rem 1rem; margin-right: 0.5rem; margin-bottom: 0.5rem; cursor: pointer; }
    .preview { display: flex; gap: 1rem; margin-top: 1rem; }
    .preview img { border: 1px solid #ddd; border-radius: 8px; }
  </style>
</head>
<body>
  <h1>Export PWA icons from favicon</h1>
  <p>Run the dev server (<code>npm run dev</code>), then open this page. Download both PNGs and place them in <code>public/</code> as <code>icon-192.png</code> and <code>icon-512.png</code>.</p>
  <div>
    <button id="dl192">Download 192×192</button>
    <button id="dl512">Download 512×512</button>
  </div>
  <div class="preview">
    <img id="preview192" width="96" height="96" alt="192 preview" />
    <img id="preview512" width="128" height="128" alt="512 preview" />
  </div>
  <script>
    const sizes = [192, 512];
    const img = new Image();
    img.crossOrigin = 'anonymous';
    img.onload = () => {
      const update = (size) => {
        const canvas = document.createElement('canvas');
        canvas.width = size;
        canvas.height = size;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = '#fff';
        ctx.fillRect(0, 0, size, size);
        ctx.drawImage(img, 0, 0, size, size);
        return canvas;
      };
      document.getElementById('preview192').src = update(192).toDataURL('image/png');
      document.getElementById('preview512').src = update(512).toDataURL('image/png');
      document.getElementById('dl192').onclick = () => {
        const a = document.createElement('a');
        a.download = 'icon-192.png';
        a.href = update(192).toDataURL('image/png');
        a.click();
      };
      document.getElementById('dl512').onclick = () => {
        const a = document.createElement('a');
        a.download = 'icon-512.png';
        a.href = update(512).toDataURL('image/png');
        a.click();
      };
    };
    img.onerror = () => { document.body.insertAdjacentText('beforeend', 'Could not load favicon. Open this page via the dev server (e.g. http://localhost:5173/export-pwa-icons.html).'); };
    img.src = '/favicon.svg';
  </script>
</body>
</html>
